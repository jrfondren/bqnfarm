<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"> <!-- bqn.js breaks without this -->
  <link rel="stylesheet" href="/bqnfarm/prism.css">
  <link rel="stylesheet" href="/bqnfarm/site.css">
  <script src="/bqnfarm/prism.js"></script>
  <title>Memoization in BQN</title>
</head>
<body>
<h3>Memoization in BQN</h3>
<p>This is mostly a POC use of bqn.js. Right-click to evaluate code and to clear code results.</p>
<p>First, set some definitions by right-clicking this code block:</p>
<pre contenteditable class="bqnrun language-bqn"><code>Notify â† {ğ•Š:
  â€¢Out "memoizing"
  â€¢JS "(() => {document.querySelector('.memowarning').textContent = ''; 1})()"
}
_memo â† {F _ğ•£: Notify@ â‹„ (â€¢HashMapËœâŸ¨âŸ©)âŠ¸{ğ•¨.Has ğ•© ? ğ•¨.Get ğ•©; (âŠ¢âŠ£ğ•©âŠ¸ğ•¨.Set) F ğ•© }}

Fib â† {
  0: 1;
  1: 1;
  ğ•Š: (Fib ğ•© - 1) + Fib ğ•© - 2
}âš‡0
Memoize â† {ğ•Š: Fib â†© Fib _memo }
</code></pre><pre class="bqnres"></pre>

<p>Run the unmemoized function a few times:</p>
<pre contenteditable class="bqnrun language-bqn"><code># fast enough
â€¢Show Fib 0
â€¢Show Fib 5
â€¢Show Fib 15
</code></pre><pre class="bqnres"></pre>

<pre contenteditable class="bqnrun language-bqn"><code># probably slow - spam a few clicks
Fib 20
</code></pre><pre class="bqnres"></pre>

<p>Now, observe how memoization affects that.</p>
<pre contenteditable class="bqnrun language-bqn"><code>Memoize@
</code></pre><pre class="bqnres"></pre>
<p class="memowarning" style="color: red">if you run this <em>without</em> memoizing you'll probably have to kill the tab!</p>
<pre contenteditable class="bqnrun language-bqn"><code>Fib 40
</code></pre><pre class="bqnres"></pre>
<footer>
  <script src="/bqnfarm/bqn.js"></script>
  <script src="/bqnfarm/repl.js"></script>
</footer>
</body>
</html>
